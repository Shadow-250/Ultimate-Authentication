(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{144:function(e,t,a){e.exports=a(281)},174:function(e,t){},176:function(e,t){},188:function(e,t){},190:function(e,t){},218:function(e,t){},220:function(e,t){},221:function(e,t){},227:function(e,t){},229:function(e,t){},247:function(e,t){},249:function(e,t){},261:function(e,t){},264:function(e,t){},281:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(26),r=a.n(o),l=a(11),s=a(7),m=a(51),u=a.n(m),i=function(e){if("undefined"!==window)return u.a.get(e)},d=function(e,t){var a,n;console.log("AUTHENTICATE HELPER ON SIGNIN RESPONSE",e),a="token",n=e.data.token,"undefined"!==window&&u.a.set(a,n,{expires:1}),function(e,t){"undefined"!==window&&localStorage.setItem(e,JSON.stringify(t))}("user",e.data.user),t()},E=function(){if("undefined"!==window&&i("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},p=function(e){var t;t="token","undefined"!==window&&u.a.remove(t,{expires:1}),function(e){"undefined"!==window&&localStorage.removeItem(e)}("user"),e()},b=function(e,t){if(console.log("UPDATE USER IN LOCALSTORAGE HELPERS",e),"undefined"!==typeof window){var a=JSON.parse(localStorage.getItem("user"));a=e.data,localStorage.setItem("user",JSON.stringify(a))}t()},f=Object(s.g)((function(e){var t=e.children,a=e.match,o=e.history,r=function(e){return a.path===e?{color:"#000"}:{color:"#fff"}};return c.a.createElement(n.Fragment,null,c.a.createElement("ul",{className:"nav nav-tabs bg-primary"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{to:"/",className:"nav-link",style:r("/")},"Home")),!E()&&c.a.createElement(n.Fragment,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{to:"/signin",className:"nav-link",style:r("/signin")},"Signin")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{to:"/signup",className:"nav-link",style:r("/signup")},"Signup"))),E()&&"admin"===E().role&&c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{className:"nav-link",style:r("/admin"),to:"/admin"},E().name)),E()&&"subscriber"===E().role&&c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{className:"nav-link",style:r("/private"),to:"/private"},E().name)),E()&&c.a.createElement("li",{className:"nav-item"},c.a.createElement("span",{className:"nav-link",style:{cursor:"pointer",color:"#fff"},onClick:function(){p((function(){o.push("/")}))}},"Signout"))),c.a.createElement("div",{className:"container"},t))})),O=function(){return c.a.createElement(f,null,c.a.createElement("div",{className:"col-md-6 offset-md-3 text-center"},c.a.createElement("h1",{className:"p-5"},"M.E.R.N Authentication"),c.a.createElement("hr",null),c.a.createElement("div",null,c.a.createElement("h2",{className:"p-5"}," Welcome to SolarEdge Monitor!"),c.a.createElement("p",{class:"content"},'"content ..."')),c.a.createElement("hr",null),c.a.createElement("footer",{class:"footer2",id:"footerRights"},c.a.createElement("div",{class:"container"},c.a.createElement("div",{class:"row"},c.a.createElement("div",{class:"span12",align:"center"},c.a.createElement("p",null,"Copyright \xa9 2020 by the ",c.a.createElement("a",{class:"inversedlink",href:""},"PNG")," Created")))))))},N=a(20),v=a(2),h=a(13),g=a(12),j=a.n(g),S=a(6),w=(a(27),function(){var e=Object(n.useState)({name:"",email:"",password:"",buttonText:"Submit"}),t=Object(h.a)(e,2),a=t[0],o=t[1],r=a.name,l=a.email,m=a.password,u=a.buttonText,i=function(e){return function(t){o(Object(v.a)(Object(v.a)({},a),{},Object(N.a)({},e,t.target.value)))}},d=function(e){e.preventDefault(),o(Object(v.a)(Object(v.a)({},a),{},{buttonText:"Submitting"})),j()({method:"POST",url:"".concat("http://127.0.0.1:8000/api","/signup"),data:{name:r,email:l,password:m}}).then((function(e){console.log("SIGNUP SUCCESS",e),o(Object(v.a)(Object(v.a)({},a),{},{name:"",email:"",password:"",buttonText:"Submitted"})),S.b.success(e.data.message)})).catch((function(e){console.log("SIGNUP ERROR",e.response.data),o(Object(v.a)(Object(v.a)({},a),{},{buttonText:"Submit"})),S.b.error(e.response.data.error)}))};return c.a.createElement(f,null,c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(S.a,null),E()?c.a.createElement(s.a,{to:"/"}):null,c.a.createElement("h1",{className:"p-5 text-center"},"Signup"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{onChange:i("name"),value:r,type:"text",className:"form-control"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{onChange:i("email"),value:l,type:"email",className:"form-control"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Password"),c.a.createElement("input",{onChange:i("password"),value:m,type:"password",className:"form-control"})),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-primary",onClick:d},u))),c.a.createElement("br",null)))}),T=function(e){var t=e.history,a=Object(n.useState)({email:"",password:"",buttonText:"Submit"}),o=Object(h.a)(a,2),r=o[0],m=o[1],u=r.email,i=r.password,p=r.buttonText,b=function(e){return function(t){m(Object(v.a)(Object(v.a)({},r),{},Object(N.a)({},e,t.target.value)))}},O=function(e){e.preventDefault(),m(Object(v.a)(Object(v.a)({},r),{},{buttonText:"Submitting"})),j()({method:"POST",url:"".concat("http://127.0.0.1:8000/api","/signin"),data:{email:u,password:i}}).then((function(e){console.log("SIGNIN SUCCESS",e),d(e,(function(){m(Object(v.a)(Object(v.a)({},r),{},{name:"",email:"",password:"",buttonText:"Submitted"})),E()&&"admin"===E().role?t.push("/admin"):t.push("/private")}))})).catch((function(e){console.log("SIGNIN ERROR",e.response.data),m(Object(v.a)(Object(v.a)({},r),{},{buttonText:"Submit"})),S.b.error(e.response.data.error)}))};return c.a.createElement(f,null,c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(S.a,null),E()?c.a.createElement(s.a,{to:"/"}):null,c.a.createElement("h1",{className:"p-5 text-center"},"Signin"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{onChange:b("email"),value:u,type:"email",className:"form-control"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Password"),c.a.createElement("input",{onChange:b("password"),value:i,type:"password",className:"form-control"})),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-primary",onClick:O},p))),c.a.createElement("br",null),c.a.createElement(l.b,{to:"/auth/password/forgot",className:"btn btn-sm btn-outline-danger"},"Forgot Password")))},x=a(49),R=a.n(x),P=function(e){var t=e.match,a=Object(n.useState)({name:"",token:"",show:!0}),o=Object(h.a)(a,2),r=o[0],l=o[1];Object(n.useEffect)((function(){var e=t.params.token,a=R.a.decode(e).name;e&&l(Object(v.a)(Object(v.a)({},r),{},{name:a,token:e}))}),[]);var s=r.name,m=r.token,u=(r.show,function(e){e.preventDefault(),j()({method:"POST",url:"".concat("http://127.0.0.1:8000/api","/account-activation"),data:{token:m}}).then((function(e){console.log("ACCOUNT ACTIVATION",e),l(Object(v.a)(Object(v.a)({},r),{},{show:!1})),S.b.success(e.data.message)})).catch((function(e){console.log("ACCOUNT ACTIVATION ERROR",e.response.data.error),S.b.error(e.response.data.error)}))});return c.a.createElement(f,null,c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(S.a,null),c.a.createElement("div",{className:"text-center"},c.a.createElement("h1",{className:"p-5"},"Hey ",s,", Ready to activate your account?"),c.a.createElement("button",{className:"btn btn-outline-primary",onClick:u},"Activate Account"))))},y=function(e){var t=e.history,a=Object(n.useState)({role:"",name:"",email:"",password:"",buttonText:"Update"}),o=Object(h.a)(a,2),r=o[0],l=o[1],s=i("token");Object(n.useEffect)((function(){m()}),[]);var m=function(){j()({method:"GET",url:"".concat("http://127.0.0.1:8000/api","/user/").concat(E()._id),headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){console.log("PRIVATE PROFILE UPDATE",e);var t=e.data,a=t.role,n=t.name,c=t.email;l(Object(v.a)(Object(v.a)({},r),{},{role:a,name:n,email:c}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),401===e.response.status&&p((function(){t.push("/")}))}))},u=r.role,d=r.name,O=r.email,g=r.password,w=r.buttonText,T=function(e){return function(t){l(Object(v.a)(Object(v.a)({},r),{},Object(N.a)({},e,t.target.value)))}},x=function(e){e.preventDefault(),l(Object(v.a)(Object(v.a)({},r),{},{buttonText:"Updating"})),j()({method:"PUT",url:"".concat("http://127.0.0.1:8000/api","/user/update"),headers:{Authorization:"Bearer ".concat(s)},data:{name:d,password:g}}).then((function(e){console.log("PRIVATE PROFILE UPDATE SUCCESS",e),b(e,(function(){l(Object(v.a)(Object(v.a)({},r),{},{buttonText:"Submitted"})),S.b.success("Profile updated successfully")}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),l(Object(v.a)(Object(v.a)({},r),{},{buttonText:"Submit"})),S.b.error(e.response.data.error)}))};return c.a.createElement(f,null,c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(S.a,null),c.a.createElement("h1",{className:"pt-5 text-center"},"Private"),c.a.createElement("p",{className:"lead text-center"},"Profile update"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Role"),c.a.createElement("input",{defaultValue:u,type:"text",className:"form-control",disabled:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{onChange:T("name"),value:d,type:"text",className:"form-control"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{defaultValue:O,type:"email",className:"form-control",disabled:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Password"),c.a.createElement("input",{onChange:T("password"),value:g,type:"password",className:"form-control"})),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-primary",onClick:x},w)))))},C=function(e){var t=e.history,a=Object(n.useState)({role:"",name:"",email:"",password:"",buttonText:"Update"}),o=Object(h.a)(a,2),r=o[0],l=o[1],s=i("token");Object(n.useEffect)((function(){m()}),[]);var m=function(){j()({method:"GET",url:"".concat("http://127.0.0.1:8000/api","/user/").concat(E()._id),headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){console.log("PRIVATE PROFILE UPDATE",e);var t=e.data,a=t.role,n=t.name,c=t.email;l(Object(v.a)(Object(v.a)({},r),{},{role:a,name:n,email:c}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),401===e.response.status&&p((function(){t.push("/")}))}))},u=r.role,d=r.name,O=r.email,g=r.password,w=r.buttonText,T=function(e){return function(t){l(Object(v.a)(Object(v.a)({},r),{},Object(N.a)({},e,t.target.value)))}},x=function(e){e.preventDefault(),l(Object(v.a)(Object(v.a)({},r),{},{buttonText:"Updating"})),j()({method:"PUT",url:"".concat("http://127.0.0.1:8000/api","/admin/update"),headers:{Authorization:"Bearer ".concat(s)},data:{name:d,password:g}}).then((function(e){console.log("PRIVATE PROFILE UPDATE SUCCESS",e),b(e,(function(){l(Object(v.a)(Object(v.a)({},r),{},{buttonText:"Submitted"})),S.b.success("Profile updated successfully")}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),l(Object(v.a)(Object(v.a)({},r),{},{buttonText:"Submit"})),S.b.error(e.response.data.error)}))};return c.a.createElement(f,null,c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(S.a,null),c.a.createElement("h1",{className:"pt-5 text-center"},"Admin"),c.a.createElement("p",{className:"lead text-center"},"Profile update"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Role"),c.a.createElement("input",{defaultValue:u,type:"text",className:"form-control",disabled:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{onChange:T("name"),value:d,type:"text",className:"form-control"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{defaultValue:O,type:"email",className:"form-control",disabled:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Password"),c.a.createElement("input",{onChange:T("password"),value:g,type:"password",className:"form-control"})),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-primary",onClick:x},w)))))},A=a(50),k=function(e){var t=e.component,a=Object(A.a)(e,["component"]);return c.a.createElement(s.b,Object.assign({},a,{render:function(e){return E()?c.a.createElement(t,e):c.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},I=function(e){var t=e.component,a=Object(A.a)(e,["component"]);return c.a.createElement(s.b,Object.assign({},a,{render:function(e){return E()&&"admin"===E().role?c.a.createElement(t,e):c.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},U=function(e){e.history;var t=Object(n.useState)({email:"",buttonText:"Request password reset link"}),a=Object(h.a)(t,2),o=a[0],r=a[1],l=o.email,s=o.buttonText,m=function(e){e.preventDefault(),r(Object(v.a)(Object(v.a)({},o),{},{buttonText:"Submitting"})),j()({method:"PUT",url:"".concat("http://127.0.0.1:8000/api","/forgot-password"),data:{email:l}}).then((function(e){console.log("FORGOT PASSWORD SUCCESS",e),S.b.success(e.data.message),r(Object(v.a)(Object(v.a)({},o),{},{buttonText:"Requested"}))})).catch((function(e){console.log("FORGOT PASSWORD ERROR",e.response.data),S.b.error(e.response.data.error),r(Object(v.a)(Object(v.a)({},o),{},{buttonText:"Request password reset link"}))}))};return c.a.createElement(f,null,c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(S.a,null),c.a.createElement("h1",{className:"p-5 text-center"},"Forgot password"),function(){return c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{onChange:(e="email",function(t){r(Object(v.a)(Object(v.a)({},o),{},Object(N.a)({},e,t.target.value)))}),value:l,type:"email",className:"form-control"})),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-primary",onClick:m},s)));var e}()))},D=function(e){var t=e.match,a=Object(n.useState)({name:"",token:"",newPassword:"",buttonText:"Reset password"}),o=Object(h.a)(a,2),r=o[0],l=o[1];Object(n.useEffect)((function(){var e=t.params.token,a=R.a.decode(e).name;e&&l(Object(v.a)(Object(v.a)({},r),{},{name:a,token:e}))}),[]);var s=r.name,m=r.token,u=r.newPassword,i=r.buttonText,d=function(e){l(Object(v.a)(Object(v.a)({},r),{},{newPassword:e.target.value}))},E=function(e){e.preventDefault(),l(Object(v.a)(Object(v.a)({},r),{},{buttonText:"Submitting"})),j()({method:"PUT",url:"".concat("http://127.0.0.1:8000/api","/reset-password"),data:{newPassword:u,resetPasswordLink:m}}).then((function(e){console.log("RESET PASSWORD SUCCESS",e),S.b.success(e.data.message),l(Object(v.a)(Object(v.a)({},r),{},{buttonText:"Done"}))})).catch((function(e){console.log("RESET PASSWORD ERROR",e.response.data),S.b.error(e.response.data.error),l(Object(v.a)(Object(v.a)({},r),{},{buttonText:"Reset password"}))}))};return c.a.createElement(f,null,c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(S.a,null),c.a.createElement("h1",{className:"p-5 text-center"},"Hey ",s,", Type your new password"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"New Password"),c.a.createElement("input",{onChange:d,value:u,type:"password",className:"form-control",placeholder:"Type new password",required:!0})),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-primary",onClick:E},i)))))},F=function(){return c.a.createElement(l.a,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/",exact:!0,component:O}),c.a.createElement(s.b,{path:"/signup",exact:!0,component:w}),c.a.createElement(s.b,{path:"/signin",exact:!0,component:T}),c.a.createElement(s.b,{path:"/auth/activate/:token",exact:!0,component:P}),c.a.createElement(k,{path:"/private",exact:!0,component:y}),c.a.createElement(I,{path:"/admin",exact:!0,component:C}),c.a.createElement(s.b,{path:"/auth/password/forgot",exact:!0,component:U}),c.a.createElement(s.b,{path:"/auth/password/reset/:token",exact:!0,component:D})))};r.a.render(c.a.createElement(F,null),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.2225e325.chunk.js.map